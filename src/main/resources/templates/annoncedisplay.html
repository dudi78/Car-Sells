<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/css/updatecar.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- Include Font Awesome CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        /* Custom styles */
        .custom-alert {
            color: #636363;
            background-color: #82ce34;
            border-color: #82ce34;
            border-radius: 5px;
            padding: 20px;
            font-size: 14px;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
        }
        .custom-alert .close {
            position: absolute;
            top: 5px;
            right: 10px;
            color: #fff;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        .custom-alert .close:hover {
            opacity: 1;
        }
    </style>

</head>
<body>
<form id="carForm" onclick="document.getElementById('carForm').addEventListener('submit', handleSubmit);" action="" method="POST" enctype="multipart/form-data" style="transform: scale(0.9);">

    <input type="hidden" name="id" th:value="${annonce.getId()}">
    <div class="form-group" style="display: flex; flex-wrap: wrap;">
        <input type="text" name="model" placeholder="Enter model" required style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;" th:value="${car.getModel()}">
        <input type="text" name="price" placeholder="Enter Price" required style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome;" th:value="${car.price}">
    </div>

    <div class="form-group" style="display: flex; flex-wrap: wrap;">
        <input type="text" name="year" placeholder="Enter Year" required style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;" th:value="${car.getCar_year()}">
        <input type="text" name="color" placeholder="Enter Color" required style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome,serif;" th:value="${car.color}">
    </div>

    <div class="form-group" style="display: flex; flex-wrap: wrap;">
        <input type="text" name="mileage" placeholder="Enter Mileage" required style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;" th:value="${car.getMileage()}">
        <input type="text" name="engineType" placeholder="Enter Engine Type" required style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome,serif;" th:value="${car.getEngineType()}">
    </div>

    <div class="form-group" style="display: flex; flex-wrap: wrap;">
        <input type="text" name="transmission" placeholder="Enter Transmission" required style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;" th:value="${car.getTransmission()}">
        <input type="text" name="fuelType" placeholder="Enter Fuel Type" required style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome;" th:value="${car.fuelType}">
    </div>

    <div class="form-group" style="display: flex; flex-wrap: wrap;">
        <input type="text" name="description" placeholder="Enter Description" required style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;" th:value="${annonce.getDescription()}">
        <input type="file" name="image1" placeholder="Add Photos" style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome;">
        <input type="file" name="image2" placeholder="Add Photos" style="width: calc(50% - 12px); margin-right: 10px; font-family: 'Arial', FontAwesome;">
        <input type="file" name="image3" placeholder="Add Photos" style="width: calc(50% - 12px); font-family: 'Arial', FontAwesome;">
    </div>

    <div class="form-group" style="display: flex; justify-content: space-between;">
        <button type="submit" class="submit-btn">Submit Changes </button>
    </div>
</form>
</body>
<script>

    function handleSubmit(event) {
        event.preventDefault();
        var formData = new FormData(document.getElementById('carForm'));


        fetch('/save-annonce', {
            method: 'POST',
            body: formData
        })
            .then(response => {

                if (response.ok) {

                    alert('Error modifiying ');


                    window.location.href = '/customerads';
                } else {

                    alert('Annonce modified successfully!');
                    window.location.href = '/customerads';
                }
            })


    }

</script>
</html>
